# Spaces Service (@universo/spaces-srv)

> üß¨ **TypeScript-first** | Modern Express.js backend for Spaces and Canvases management

–ë—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–∏—Å –¥–ª—è –¥–æ–º–µ–Ω–∞ –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ –≤ Universo Platformo. –≠—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª—è–µ—Ç –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞–º–∏ (—Ä–∞–Ω–µ–µ Chatflows) –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ —Å –Ω–∏–º–∏ –•–æ–ª—Å—Ç–∞–º–∏ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Ö–æ–ª—Å—Ç–∞–º–∏.

## –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞–∫–µ—Ç–µ

| –°–≤–æ–π—Å—Ç–≤–æ          | –ó–Ω–∞—á–µ–Ω–∏–µ                |
| ----------------- | ----------------------- |
| **–í–µ—Ä—Å–∏—è**        | `0.1.0`                 |
| **–¢–∏–ø –ø–∞–∫–µ—Ç–∞**    | Workspace Package       |
| **–°—Ç–∞—Ç—É—Å**        | ‚úÖ –ê–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞  |

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- üóÇÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ö–æ–ª—Å—Ç–æ–≤ —Å –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ-—Ö–æ–ª—Å—Ç
- üìä PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π TypeORM
- üõ°Ô∏è Row Level Security (RLS) —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π Supabase
- üîÑ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏—è –∏ –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏—è —Ö–æ–ª—Å—Ç–æ–≤
- üè¢ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π —Ä–∞–±–æ—á–∏—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ Unik
- üì¶ RESTful API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞–º–∏ –∏ —Ö–æ–ª—Å—Ç–∞–º–∏

## –û–±–∑–æ—Ä

–°–µ—Ä–≤–∏—Å –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:
- **–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞**: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è, –≥—Ä—É–ø–ø–∏—Ä—É—é—â–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ö–æ–ª—Å—Ç—ã
- **–•–æ–ª—Å—Ç—ã**: –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã –ø–æ—Ç–æ–∫–æ–≤ –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ (—ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç —Å—Ç–∞—Ä–æ–π –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ Chatflow)
- **–°–≤—è–∑–∏ –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ-–•–æ–ª—Å—Ç**: –û—Ç–Ω–æ—à–µ–Ω–∏—è –º–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏—è

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

- `spaces` - –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- `canvases` - –û—Ç–¥–µ–ª—å–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ —Ö–æ–ª—Å—Ç–æ–≤, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–æ—Ç–æ–∫–æ–≤
- `spaces_canvases` - –¢–∞–±–ª–∏—Ü–∞ —Å–≤—è–∑–µ–π, —É–ø—Ä–∞–≤–ª—è—é—â–∞—è –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ-—Ö–æ–ª—Å—Ç —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ö–æ–ª—Å—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤
- –£–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏–µ –∏ –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏–µ —Ö–æ–ª—Å—Ç–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è RLS (Row Level Security) —Å Supabase
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π —Ä–∞–±–æ—á–∏—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ Unik

## API Endpoints

### –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
- `GET /api/v1/spaces` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤
- `POST /api/v1/spaces` - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
- `GET /api/v1/spaces/:id` - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ —Å —Ö–æ–ª—Å—Ç–∞–º–∏

### –•–æ–ª—Å—Ç—ã
- `GET /api/v1/spaces/:id/canvases` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ö–æ–ª—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
- `POST /api/v1/spaces/:id/canvases` - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ö–æ–ª—Å—Ç–∞ –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°–±–æ—Ä–∫–∞
```bash
pnpm --filter @universo/spaces-srv build
```

### –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
pnpm --filter @universo/spaces-srv dev
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–≠—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å:
- **–°–µ—Ä–≤–∏—Å Uniks**: –î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—á–∏–º–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞–º–∏ –∏ –ø—Ä–∞–≤–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä Flowise**: –î–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
- **Supabase**: –î–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –ø–æ–ª–∏—Ç–∏–∫ RLS

## –ú–∏–≥—Ä–∞—Ü–∏—è –æ—Ç Chatflows

–≠—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –º–∏–≥—Ä–∞—Ü–∏–∏ –æ—Ç –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –µ–¥–∏–Ω–æ–≥–æ Chatflow –∫ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Ö–æ–ª—Å—Ç–∞–º–∏. –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤–µ—Å—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, –¥–æ–±–∞–≤–ª—è—è –ø–æ–¥–¥–µ—Ä–∂–∫—É –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ö–æ–ª—Å—Ç–æ–≤ –Ω–∞ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ.