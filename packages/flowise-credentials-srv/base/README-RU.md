# @universo/flowise-credentials-srv

–ë—ç–∫–µ–Ω–¥-–ø–∞–∫–µ—Ç –¥–ª—è –¥–æ–º–µ–Ω–∞ Credentials –≤ Universo Platformo (–∏–∑–≤–ª–µ—á—ë–Ω –∏–∑ flowise-server).

## –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –ø–∞–∫–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±—ç–∫–µ–Ω–¥-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —É—á—ë—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö –≤ AI-–≤–æ—Ä–∫—Ñ–ª–æ—É. –£—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞–¥—ë–∂–Ω–æ —Ö—Ä–∞–Ω—è—Ç—Å—è —Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –æ—Ç–¥–µ–ª—å–Ω—ã–º Unik.

## –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞–∫–µ—Ç–µ

- **–ü–∞–∫–µ—Ç**: `@universo/flowise-credentials-srv`
- **–í–µ—Ä—Å–∏—è**: `0.1.0`
- **–¢–∏–ø**: –ë—ç–∫–µ–Ω–¥ (–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π)
- **–§—Ä–µ–π–º–≤–æ—Ä–∫**: Express.js, TypeORM, TypeScript
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `@universo/uniks-srv` (—Å–≤—è–∑—å —Å —Å—É—â–Ω–æ—Å—Ç—å—é Unik)

## –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üóÑÔ∏è –°–ª–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–°—É—â–Ω–æ—Å—Ç—å Credential**: TypeORM-—Å—É—â–Ω–æ—Å—Ç—å —Å–æ —Å–≤—è–∑—å—é —Å Unik –¥–ª—è –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ–π –∏–∑–æ–ª—è—Ü–∏–∏
- **–ú–∏–≥—Ä–∞—Ü–∏–∏**: –ú–∏–≥—Ä–∞—Ü–∏–∏ PostgreSQL –¥–ª—è —Å—Ö–µ–º—ã —Ç–∞–±–ª–∏—Ü—ã —É—á—ë—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### üîß –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π
- **CredentialsService**: CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: Zod-—Å—Ö–µ–º—ã –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å–æ–∑–¥–∞–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∫–ª–∞—Å—Å—ã –æ—à–∏–±–æ–∫ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ HTTP-—Å—Ç–∞—Ç—É—Å–∞–º–∏

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ**: –î–∞–Ω–Ω—ã–µ —É—á—ë—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π —à–∏—Ñ—Ä—É—é—Ç—Å—è –ø—Ä–∏ —Ö—Ä–∞–Ω–µ–Ω–∏–∏
- **–ò–∑–æ–ª—è—Ü–∏—è Unik**: –£—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –æ—Ç–¥–µ–ª—å–Ω—ã–º Unik

### üõ£Ô∏è –°–ª–æ–π –º–∞—Ä—à—Ä—É—Ç–æ–≤
- **Express Router**: RESTful API-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å middleware –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- **–ü–∞—Ç—Ç–µ—Ä–Ω DI**: –§–∞–±—Ä–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pnpm add @universo/flowise-credentials-srv
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
import {
    createCredentialsService,
    createCredentialsRouter,
    Credential,
    credentialsMigrations
} from '@universo/flowise-credentials-srv'

// –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ —Å DI
const credentialsService = createCredentialsService({
    getDataSource: () => dataSource,
    encryptCredentialData: async (data) => encrypt(data),
    decryptCredentialData: async (data) => decrypt(data),
    telemetry: telemetryService,
    metrics: metricsProvider
})

// –°–æ–∑–¥–∞–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–∞
const credentialsRouter = createCredentialsRouter({ credentialsService })

// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–∞
app.use('/api/v1/unik/:unikId/credentials', credentialsRouter)
```

## –≠–∫—Å–ø–æ—Ä—Ç—ã

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- `Credential` - TypeORM-—Å—É—â–Ω–æ—Å—Ç—å
- `credentialsMigrations` - –ú–∞—Å—Å–∏–≤ –º–∏–≥—Ä–∞—Ü–∏–π

### –°–µ—Ä–≤–∏—Å—ã
- `createCredentialsService` - –§–∞–±—Ä–∏—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞
- `ICredentialsService` - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–µ—Ä–≤–∏—Å–∞
- `CredentialsServiceConfig` - –¢–∏–ø –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `CredentialsServiceError` - –ö–∞—Å—Ç–æ–º–Ω—ã–π –∫–ª–∞—Å—Å –æ—à–∏–±–∫–∏

### –ú–∞—Ä—à—Ä—É—Ç—ã
- `createCredentialsRouter` - –§–∞–±—Ä–∏—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–∞
- `credentialsErrorHandler` - Express middleware –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- `CredentialsControllerError` - –ö–ª–∞—Å—Å –æ—à–∏–±–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
packages/flowise-credentials-srv/
‚îú‚îÄ‚îÄ base/
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ entities/      # –°—É—â–Ω–æ—Å—Ç—å Credential
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ migrations/    # –ú–∏–≥—Ä–∞—Ü–∏–∏ PostgreSQL
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/            # Express-—Ä–æ—É—Ç–µ—Ä
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts           # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ dist/                  # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.json
‚îÇ   ‚îú‚îÄ‚îÄ README.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (EN)
‚îÇ   ‚îî‚îÄ‚îÄ README-RU.md           # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ package.json               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–æ—Ä–∫—Å–ø–µ–π—Å–∞
```

## API-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/unik/:unikId/credentials` | –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è Unik |
| GET | `/unik/:unikId/credentials/:id` | –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ ID |
| POST | `/unik/:unikId/credentials` | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |
| PUT | `/unik/:unikId/credentials/:id` | –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |
| DELETE | `/unik/:unikId/credentials/:id` | –£–¥–∞–ª–∏—Ç—å —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pnpm install

# –°–±–æ—Ä–∫–∞
pnpm build

# –ó–∞–ø—É—Å–∫ –ª–∏–Ω—Ç–µ—Ä–∞
pnpm lint

# –†–µ–∂–∏–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
pnpm dev
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

Apache License Version 2.0 - –°–º. —Ñ–∞–π–ª [LICENSE](../../../LICENSE) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.
