# @universo/applications-backend

> üèóÔ∏è **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–∞–∫–µ—Ç** - TypeScript-first –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å Express.js –∏ TypeORM

–ë—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏, –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞–º–∏ –∏ —á–ª–µ–Ω—Å—Ç–≤–æ–º —Å–æ —Å—Ç—Ä–æ–≥–æ–π –∏–∑–æ–ª—è—Ü–∏–µ–π –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞–∫–µ—Ç–µ

- **–ü–∞–∫–µ—Ç**: `@universo/applications-backend`
- **–í–µ—Ä—Å–∏—è**: `0.1.0`
- **–¢–∏–ø**: Backend Service Package (TypeScript)
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ê–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Express.js + TypeORM + Zod

## –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –î–æ–º–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å
- **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è**: –í–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã —Å –ø–æ–ª–Ω–æ–π –∏–∑–æ–ª—è—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö
- **–ö–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã**: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- **–ß–ª–µ–Ω—Å—Ç–≤–æ**: –ß–ª–µ–Ω—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Å —Ä–æ–ª—è–º–∏ –∏ –ø—Ä–∞–≤–∞–º–∏

### –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π ‚Äî –Ω–µ—Ç –º–µ–∂–ø—Ä–∏–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
- –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –æ–± –æ—à–∏–±–∫–∞—Ö
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å guard-–∞–º–∏
- –ó–∞—â–∏—Ç–∞ –æ—Ç DoS-–∞—Ç–∞–∫ —á–µ—Ä–µ–∑ rate limiting

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- –ü–∞—Ç—Ç–µ—Ä–Ω TypeORM Repository –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –¥–∞–Ω–Ω—ã–º–∏
- PostgreSQL —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π JSONB –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä
- CASCADE —É–¥–∞–ª–µ–Ω–∏–µ —Å–≤—è–∑–µ–π —Å UNIQUE –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏

> **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –º–∏–≥—Ä–∞—Ü–∏—è–º**: [MIGRATIONS.md](MIGRATIONS.md) | [MIGRATIONS-RU.md](MIGRATIONS-RU.md)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–∑ –∫–æ—Ä–Ω—è workspace
pnpm install

# –°–±–æ—Ä–∫–∞ –ø–∞–∫–µ—Ç–∞
pnpm --filter @universo/applications-backend build
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Express Router (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```typescript
import express from 'express'
import { createApplicationsRoutes, initializeRateLimiters } from '@universo/applications-backend'

const app = express()
app.use(express.json())

await initializeRateLimiters()

app.use('/api/v1', createApplicationsRoutes(ensureAuth, getDataSource))
```

## API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```
GET    /applications                           # –°–ø–∏—Å–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
POST   /applications                           # –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
GET    /applications/:applicationId            # –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
PUT    /applications/:applicationId            # –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
DELETE /applications/:applicationId            # –£–¥–∞–ª–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```

### –ö–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã
```
GET    /applications/:applicationId/connectors              # –°–ø–∏—Å–æ–∫ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–æ–≤
POST   /applications/:applicationId/connectors              # –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä
GET    /applications/:applicationId/connectors/:connectorId # –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞
PUT    /applications/:applicationId/connectors/:connectorId # –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä
DELETE /applications/:applicationId/connectors/:connectorId # –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä
```

### –£—á–∞—Å—Ç–Ω–∏–∫–∏
```
GET    /applications/:applicationId/members              # –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
POST   /applications/:applicationId/members              # –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞
PUT    /applications/:applicationId/members/:memberId    # –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å —É—á–∞—Å—Ç–Ω–∏–∫–∞
DELETE /applications/:applicationId/members/:memberId    # –£–¥–∞–ª–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞
```

## –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
- `Application`: –í–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ –∏–º–µ–Ω–µ–º/–æ–ø–∏—Å–∞–Ω–∏–µ–º (VLC)
- `Connector`: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –∫–æ–¥–æ–≤—ã–º –∏–º–µ–Ω–µ–º –∏ –ø–æ—Ä—è–¥–∫–æ–º —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- `ApplicationUser`: –¢–∞–±–ª–∏—Ü–∞ —Å–≤—è–∑–∏ –¥–ª—è —á–ª–µ–Ω—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Å —Ä–æ–ª—è–º–∏

### –°–≤—è–∑–∏
```
Application (1) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ (N) Connector
                     ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ (N) ApplicationUser ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ (1) User
```

## –†–æ–ª–∏ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

| –†–æ–ª—å    | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª. | –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | –£–¥–∞–ª–µ–Ω–∏–µ |
|---------|------------------------|------------------|-------------------|----------------|----------|
| owner   | ‚úÖ                      | ‚úÖ                | ‚úÖ                 | ‚úÖ              | ‚úÖ        |
| admin   | ‚úÖ                      | ‚úÖ                | ‚úÖ                 | ‚úÖ              | ‚úÖ        |
| editor  | ‚ùå                      | ‚ùå                | ‚úÖ                 | ‚úÖ              | ‚úÖ        |
| member  | ‚ùå                      | ‚ùå                | ‚ùå                 | ‚ùå              | ‚ùå        |

## –§—É–Ω–∫—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**: –í—Å–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è Zod —Å—Ö–µ–º–∞–º–∏
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ guard-—ã**: –†–æ–ª–µ–≤–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö
- **Rate Limiting**: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ª–∏–º–∏—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
- **–ó–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π**: –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã TypeORM
- **CORS**: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π cross-origin resource sharing

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
pnpm --filter @universo/applications-backend test
```

### –°–±–æ—Ä–∫–∞
```bash
pnpm --filter @universo/applications-backend build
```

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã

- `@universo/applications-frontend` - Frontend UI –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- `@flowise/core-backend` - Core backend —Å DataSource –∏ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
- `@universo/types` - –û–±—â–∏–µ TypeScript —Ç–∏–ø—ã

## –õ–∏—Ü–µ–Ω–∑–∏—è

Omsk Open License
